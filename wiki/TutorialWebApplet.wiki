#summary Using jZebra as a Web Applet component
#labels Featured,Phase-Deploy,Phase-Support

= Introduction =
This is a step-by-step tutorial that walks a web developer through creating a *html web applet* capable of sending raw commands directly to a printer through JavaScript commands.

*This is a new tutorial for version 1.0.4 and higher.  For version 1.0.3, see the legacy tutorial [TutorialWebApplet_Legacy]*

For a quickstart,  download and extract the [http://code.google.com/p/jzebra/downloads/list latest version] and examine the applet code inside the provide sample html.

*TODO:  Update Preview Screenshot*
  || [http://2.bp.blogspot.com/_9hmP3Ho0t14/SveEeR-bCPI/AAAAAAAAAVo/6YIGLK_GGZo/s1600/xp_ie7.PNG http://2.bp.blogspot.com/_9hmP3Ho0t14/SveEeR-bCPI/AAAAAAAAAVo/6YIGLK_GGZo/s200/xp_ie7.PNG] ||

  || *Note:* jZebra requires Java 5 or higher to run.  For help installing Java on your platform, see the [http://img132.imageshack.us/img132/3416/cup1ad7.png][TutorialJavaInstall Java tutorial]. ||

----
= Steps =
== Load The Applet ==
  # Make sure your printer is set up on your workstation with the name "zebra" (this can be changed later).
  # Make sure printer is connected as a raw print queue.
    [http://code.google.com/p/jzebra/wiki/TutorialRawXP#Steps http://3.bp.blogspot.com/_9hmP3Ho0t14/SvXbFLIbfXI/AAAAAAAAAUQ/EmPDrWLk7YI/s400/config_win.png][http://code.google.com/p/jzebra/wiki/TutorialRawUbuntu#Steps http://4.bp.blogspot.com/_9hmP3Ho0t14/SvXbE4Sp39I/AAAAAAAAAUI/dvvUZ_sJNQA/s400/config_lin.png][http://code.google.com/p/jzebra/wiki/TutorialRawOSX#Steps http://2.bp.blogspot.com/_9hmP3Ho0t14/SvXbE_kTK_I/AAAAAAAAAUA/a-Ucl9UaIvI/s400/config_mac.png]http://2.bp.blogspot.com/_9hmP3Ho0t14/SvXbEnoMELI/AAAAAAAAAT4/eF4xkJ68ALY/s400/config_end.png
  # Download the [http://code.google.com/p/jzebra/downloads/list latest version] and extract the contents to your desktop.  
   * Create a plain text file "print.html".  Insert the applet code to create the applet.
    {{{
    <html><body>
       <applet name="jZebra" code="jzebra.RawPrintApplet.class" archive="./jzebra.jar" width="100" height="100">
          <param name="sleep" value="200">
       </applet><br><br>
    </html></body>
    }}}
   * Save the file in the same folder as `jzebra.jar`.
   * Open `print.html` with a web browser (Firefox).
   || *Note:* IE7 may receive an ActiveX warning. Click "Allow Blocked Content"<br><br> http://2.bp.blogspot.com/_9hmP3Ho0t14/SxgmMqgJQAI/AAAAAAAAAW4/WBkVhYcg4no/s400/blocked_content.png ||
   || *Note:* IE7 may be prompt to Click to Activate This Control each time the applet loads.  Click [http://www.mix-fx.com/flash-prompt.htm here] for details. ||
  #  The applet will begin to load in the web page.
     [http://2.bp.blogspot.com/_9hmP3Ho0t14/SxgoGt3lmKI/AAAAAAAAAXA/jsqVvrlRl4k/s400/applet_loading.PNG]
  #  Next, Java security dialog prompt is shown.  Click "Run".
   [http://1.bp.blogspot.com/_9hmP3Ho0t14/Sxg0XxeTomI/AAAAAAAAAXI/rStKpFiZuU8/s400/digital_signature.PNG]
  #  The applet should be loaded.  At this point it will look like a blank page.
     [http://3.bp.blogspot.com/_9hmP3Ho0t14/Sxg33AE8swI/AAAAAAAAAXQ/yiooaR3yCsY/s400/applet_plain_preview.PNG]
  #  Right click the Java system tray icon (Windows) and clicking "[http://img74.imageshack.us/img74/2423/jzebrajava1tx5.png Open Java Console]".  Linux users run: `jcontrol` --> Advanced --> Java Console --> Show Console.
  || *Note:* The Java Console is critical for calibrating jZebra for your printer. ||
  #  You should see the version of jZebra followed by `===== JAVASCRIPT LISTENER THREAD STARTED =====` in the log.  Sample:*
    {{{
       Java Plug-in 1.6.0_17
       Using JRE version 1.6.0_17-b04 Java HotSpot(TM) Client VM
       User home directory = C:\Documents and Settings\tfino
       
       ----------------------------------------------------
       c:   clear console window
       f:   finalize objects on finalization queue
       g:   garbage collect
       h:   display this help message
       l:   dump classloader list
       m:   print memory usage
       o:   trigger logging
       q:   hide console
       r:   reload policy configuration
       s:   dump system and deployment properties
       t:   dump thread list
       v:   dump thread stack
       x:   clear classloader cache
       0-5: set trace level to <n>
       ----------------------------------------------------
       
       Dec 3, 2009 5:03:33 PM jzebra.LogIt log
       INFO: jZebra 1.0.4
       Dec 3, 2009 5:03:33 PM jzebra.LogIt log
       INFO: ===== JAVASCRIPT LISTENER THREAD STARTED =====
    }}}
*
== Set Parameters ==
  # jZebra's parameters are set through JavaScript commands.  Set the printer name to "zebra"
   *  JavaScript Code (example):
   {{{
      <script>
      function findPrinter() {
         document.jZebra.findPrinter("zebra");
      }
      </script>
   }}}
   *  Add a *Find Printer* button (after `</applet><br><br>` code):
   {{{
      <input type=button onClick="findPrinter()" value="Detect Printer"><br><br>
   }}}
   *  Load page in web browser and click "Find Printer" button.
   *  View Java console for output.  Look for `"INFO: Printer found..."`
   *  *TODO:  Find Printer Button Screenshot*
  # Send commands to printer (Don't forget NewLine)
   * JavaScript Code: (Example)
   {{{
      function print() {
         // Hint:  Carriage Return = "\r", New Line = "\n" 
         document.jZebra.append("A37,503,0,1,2,3,N,ABC WIDGET CO\n");

         // Send Commands to Printer
         document.jZebra.print();
      }
   }}}
   || *Note:* The raw commands provided in the sample are not intended for use with your printer, they're provided as an example. ||
   * Add a *Print* button (after `"Detect Printer"><br><br>` code):
   {{{
       <input type=button onClick="print()" value="Print"><br><br>
   }}}
   *  Load page in web browser to test print button
   *  *TODO:  Print Button Screenshot*
   *  *TODO:  Console Output Screenshot*
   *  View Java console for output
  #  Load the applet and try to print.

=== php Printing ===
  #  Replace `print()` function with this code:
   {{{
      function print() {
         document.jZebra.append(<?php echo $commands; ?>);

         // Send Commands to Printer
         document.jZebra.print();
      }
   }}}

=== Base64 Printing ===
  #  Replace `print()` function with this code:
   {{{
      function print() {
         applet.append64("SEVMTE8hICBZT1UgQVJFIFJFQURJTkcgQSBERUNPREVE");
         applet.append64("IEJBU0U2NCBNRVNTQUdFIFNFTlQgRlJPTSBKWkVCUkEu");

         // Send Commands to Printer
         document.jZebra.print();
      }
   }}}

=== Special Characters ===
   {{{
      function print() {
         // CHR(27) + CHR(29)
         applet.append(String.fromCharCode(27) + String.fromCharCode(29));

         // HEX
         applet.append("\x00\x01\x02\xFF");

         // Send Commands to Printer
         document.jZebra.print();
      }
   }}}


=== End of Tutorial ===

== Conclusion ==
  This tutorial needs work.  Please help by submitting changes.  Email questions or suggestions to [mailto:tres.finocchiaro@gmail.com the author].